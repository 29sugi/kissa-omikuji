<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>喫茶店 星座ルーレットおみくじ</title>
  <style>
    body{font-family:"Noto Serif JP",serif;background:#f6f1e7;color:#2a2a2a;margin:0}
    .wrap{max-width:860px;margin:0 auto;padding:18px;text-align:center}
    h1{font-size:22px;margin:10px 0 14px}
    .machine{background:#fff7ea;border:2px solid #6b4f3a;border-radius:16px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,.12)}
    .needle{
      width:0;height:0;border-left:14px solid transparent;border-right:14px solid transparent;border-bottom:26px solid #b52121;
      margin:0 auto;transform:translateY(10px);filter:drop-shadow(0 2px 2px rgba(0,0,0,.25));
    }

    .dial-wrap{position:relative;width:340px;height:340px;margin:10px auto 10px}

    /* 外周リング（これが回る） */
    .ring{
      position:absolute;inset:0;border-radius:50%;
      border:10px solid #6b4f3a;
      transform: rotate(0deg);
      transition: transform 2.9s cubic-bezier(.1,.9,.1,1);
      box-shadow: inset 0 0 0 2px rgba(0,0,0,.10);
      background:
        /* 48分割の溝（暗い線） */
        repeating-conic-gradient(
          rgba(40,40,40,.55) 0 0.9deg,
          transparent 0.9deg 7.5deg
        ),
        /* 銀っぽい面（メタル感） */
        conic-gradient(
          #f6f7f9 0deg,
          #cfd5dd 35deg,
          #f7f8fa 80deg,
          #bfc6cf 120deg,
          #f6f7f9 180deg,
          #c9d0d9 240deg,
          #f7f8fa 300deg,
          #bfc6cf 360deg
        );
    }

    /* リングの内側にもう一段影 */
    .ring::after{
      content:"";
      position:absolute;inset:18px;border-radius:50%;
      box-shadow: inset 0 0 0 2px rgba(0,0,0,.12), inset 0 8px 22px rgba(0,0,0,.10);
      background: radial-gradient(circle at 50% 45%, rgba(255,255,255,.75), rgba(255,255,255,0) 55%);
      pointer-events:none;
    }

    /* 真ん中（星座アイコンだけ） */
    .center{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
      width:150px;height:150px;border-radius:50%;
      background:#fff;
      border:2px solid rgba(107,79,58,.55);
      box-shadow:0 10px 24px rgba(0,0,0,.12);
      display:flex;align-items:center;justify-content:center;
      user-select:none;
    }
    .zicon{
      font-size:64px; line-height:1;
      color:#6b4f3a;
      filter: drop-shadow(0 1px 0 rgba(255,255,255,.8));
    }
    .zsub{
      position:absolute;left:50%;top:calc(50% + 52px);transform:translateX(-50%);
      font-size:12px;opacity:.75;
    }

    /* 赤い球（針の下に固定） */
    .ball{
      position:absolute;left:50%;top:50%;
      width:16px;height:16px;border-radius:50%;
      background:#c01616;
      box-shadow:0 2px 9px rgba(0,0,0,.35), inset 0 1px 2px rgba(255,255,255,.35);
      transform: translate(-50%,-50%) translate(0,-153px);
      z-index:5;
    }

    .panel{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:8px;align-items:center}
    button,select{border:2px solid #6b4f3a;background:#fff;padding:10px 12px;border-radius:12px;font-size:15px}
    button{cursor:pointer}
    button:disabled,select:disabled{opacity:.5;cursor:not-allowed}
    .selectbox{display:flex;gap:8px;align-items:center;justify-content:center;flex-wrap:wrap}
    .tag{font-size:13px;opacity:.75}

    .status{margin-top:8px;font-size:14px;opacity:.85}

    .slot{margin:14px auto 0;width:min(680px,95%);background:#fff;border:2px dashed #6b4f3a;border-radius:14px;padding:12px}
    .paper{display:none;margin-top:10px;background:#fff;border:1px solid #ddd;border-radius:10px;padding:14px;text-align:left;box-shadow:0 6px 18px rgba(0,0,0,.10)}
    .paper h2{margin:0 0 8px;font-size:18px}
    .meta{font-size:13px;opacity:.8;margin:0 0 10px}
    .line{margin:6px 0;font-size:15px}
    .hint{font-size:13px;opacity:.75;margin-top:10px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>喫茶店 星座ルーレットおみくじ</h1>

    <div class="machine">
      <div class="needle"></div>

      <div class="dial-wrap" aria-label="星座ルーレット">
        <div id="ring" class="ring"></div>
        <div class="ball" aria-label="赤い球"></div>

        <div class="center">
          <div>
            <div class="zicon" id="zicon">✦</div>
          </div>
          <div class="zsub" id="zname">星座を選んでください</div>
        </div>
      </div>

      <div class="panel">
        <div class="selectbox">
          <span class="tag">星座：</span>
          <select id="zodiac">
            <option value="">選んでください</option>
          </select>
        </div>

        <button id="lever" disabled>レバーを引く</button>
        <button id="reset" disabled>もう一回</button>
      </div>

      <div class="status" id="status">手順：星座 → レバー</div>

      <div class="slot">
        <div>おみくじ出口</div>
        <div id="paper" class="paper">
          <h2 id="luck">—</h2>
          <div class="meta" id="meta">—</div>
          <div class="line" id="zline">星座：—</div>
          <div class="line" id="love">恋愛：—</div>
          <div class="line" id="work">仕事：—</div>
          <div class="line" id="health">健康：—</div>
          <div class="line" id="one">一言：—</div>
        </div>
        <div class="hint">※喫茶店の雰囲気だけです。</div>
      </div>
    </div>
  </div>

<script>
  const ring = document.getElementById("ring");
  const leverBtn = document.getElementById("lever");
  const resetBtn = document.getElementById("reset");
  const zodiacSel = document.getElementById("zodiac");
  const paper = document.getElementById("paper");
  const statusEl = document.getElementById("status");
  const ziconEl = document.getElementById("zicon");
  const znameEl = document.getElementById("zname");

  // 12星座
  const zodiacs = ["牡羊座","牡牛座","双子座","蟹座","獅子座","乙女座","天秤座","蠍座","射手座","山羊座","水瓶座","魚座"];

  // いまは「絵だけ」を簡易的に記号で置いてる（あとで画像に差し替え可能）
  // ここを好きな絵文字・記号・SVGに変えればOK
  const icons = ["♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓"];

  const fortunes = [
    {luck:"大吉", love:"話しかけると吉", work:"先に片づけるべし", health:"湯船が正義", one:"プリンが運を連れてくる"},
    {luck:"中吉", love:"返信は急がず", work:"手順を守れ", health:"首を温めよ", one:"喫茶店の椅子は味方"},
    {luck:"小吉", love:"笑うと流れが変わる", work:"メモがあなたを救う", health:"水を一杯足せ", one:"今日は“焦らない”が最大の技"},
    {luck:"吉",   love:"比べない", work:"一点集中", health:"目を休めよ", one:"コーヒーは濃すぎ注意"},
    {luck:"末吉", love:"期待しすぎない", work:"見直し一回", health:"冷え
