<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>喫茶店 星座ルーレットおみくじ</title>

<style>
body{
  font-family:"Noto Serif JP",serif;
  background:#f6f1e7;
  margin:0;
  text-align:center;
  color:#2a2a2a;
}
.wrap{max-width:860px;margin:0 auto;padding:18px;}
h1{font-size:22px;margin:10px 0 14px;}

.machine{
  background:#fff7ea;
  border:2px solid #6b4f3a;
  border-radius:16px;
  padding:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.12);
}

/* ルーレット */
.dial-wrap{
  position:relative;
  width:340px;height:340px;
  margin:10px auto 8px;
}
.ring{
  position:absolute; inset:0;
  border-radius:50%;
  border:8px solid #6b4f3a;
  transform:rotate(0deg);
  transition:transform 3s cubic-bezier(.1,.9,.1,1);
  background:
    repeating-conic-gradient(
      rgba(40,40,40,.62) 0 1deg,
      transparent 1deg 7.5deg
    ),
    conic-gradient(#f5f6f8,#cfd5dd,#f7f8fa,#bfc6cf,#f5f6f8);
}
.ring::after{
  content:"";
  position:absolute;
  inset:60px;
  border-radius:50%;
  background:#fff7ea;
}

.center{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:220px; height:220px;
  border-radius:50%;
  background:#fff;
  border:2px solid rgba(107,79,58,.5);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:3;
}
.zicon{font-size:90px;color:#6b4f3a;}
.zname{
  position:absolute;
  bottom:25px;
  font-size:13px;
  opacity:.7;
}

.pointer{
  position:absolute;
  left:50%;
  bottom:-8px;
  transform:translateX(-50%) rotate(180deg);
  width:0;height:0;
  border-left:18px solid transparent;
  border-right:18px solid transparent;
  border-top:32px solid #d4af37;
  z-index:5;
}

.panel{margin-top:10px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;}
select,button{
  padding:10px 12px;
  border-radius:12px;
  border:2px solid #6b4f3a;
  background:#fff;
  font-size:15px;
}
button{cursor:pointer}
button:disabled{opacity:.5}
.status{margin-top:10px;font-size:14px;opacity:.9}

/* 紙 */
.ticket{
  width:min(520px, 96%);
  margin:14px auto 0;
  background:#fff;
  border:1px solid #ddd;
  border-radius:10px;
  box-shadow:0 10px 24px rgba(0,0,0,.16);
  padding:16px;
  text-align:left;
  display:none;
}
.ticket.show{display:block;}

.ticket h2{margin:0 0 10px;font-size:20px;}
.meta{font-size:12px;opacity:.75;margin-bottom:14px;}

.line{
  margin:6px 0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.gap{height:10px;}
.small{
  font-size:13px;
  opacity:.85;
  white-space:normal;
}
</style>
</head>

<body>
<div class="wrap">
<h1>喫茶店 星座ルーレットおみくじ</h1>

<div class="machine">
  <div class="dial-wrap">
    <div id="ring" class="ring"></div>
    <div class="pointer"></div>

    <div class="center">
      <div class="zicon" id="zicon">✦</div>
      <div class="zname" id="zname">星座を選んでください</div>
    </div>
  </div>

  <div class="panel">
    <select id="zodiac">
      <option value="">選んでください</option>
      <option value="0">牡羊座</option><option value="1">牡牛座</option>
      <option value="2">双子座</option><option value="3">蟹座</option>
      <option value="4">獅子座</option><option value="5">乙女座</option>
      <option value="6">天秤座</option><option value="7">蠍座</option>
      <option value="8">射手座</option><option value="9">山羊座</option>
      <option value="10">水瓶座</option><option value="11">魚座</option>
    </select>

    <button id="lever" disabled>レバーを引く</button>
    <button id="reset" disabled>もう一回</button>
  </div>

  <div class="status" id="status">手順：星座 → レバー</div>

  <div id="ticket" class="ticket">
    <h2 id="luck">—</h2>
    <div class="meta" id="meta"></div>

    <div class="line" id="today"></div>

    <div class="line" id="love"></div>
    <div class="line" id="work"></div>
    <div class="line" id="health"></div>
    <div class="line" id="money"></div>
    <div class="line" id="people"></div>
    <div class="line" id="time"></div>

    <div class="gap"></div>

    <div class="line" id="item"></div>
    <div class="line" id="food"></div>
    <div class="line" id="color"></div>

    <div class="gap"></div>

    <div class="line small" id="one"></div>
    <div class="line small" id="caution"></div>
  </div>
</div>
</div>

<script>
const ring=document.getElementById("ring");
const zodiacSel=document.getElementById("zodiac");
const leverBtn=document.getElementById("lever");
const resetBtn=document.getElementById("reset");
const zicon=document.getElementById("zicon");
const zname=document.getElementById("zname");
const ticket=document.getElementById("ticket");
const statusEl=document.getElementById("status");

const zodiacs=["牡羊座","牡牛座","双子座","蟹座","獅子座","乙女座","天秤座","蠍座","射手座","山羊座","水瓶座","魚座"];
const icons=["♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓"];

const love=["今日は聞き役が吉。","返事は急がず温度を合わせよ。"];
const work=["確認は一回多めに。","段取りが勝ち。"];
const health=["湯船が正義。","水を一杯足せ。"];
const money=["勢いで買わない。","財布の整理が吉。"];
const people=["言い切らず余白を残せ。","褒め言葉は具体的に。"];
const timeLuck=["午前","昼","夕方","夜"];
const items=["紙ナプキン","メモ帳","万年筆"];
const foods=["トースト","プリン","ブラックコーヒー"];
const colors=["深緑","群青","生成り"];

const oneLiners=["今日は守りが攻め。","小さく整えると大きく進む。"];
const cautions=["予定を詰めすぎない。","口数が増えるほど失点。"];

function pick(arr){return arr[Math.floor(Math.random()*arr.length)];}
function nowStr(){
 const d=new Date();
 const p=n=>String(n).padStart(2,"0");
 return `${d.getFullYear()}-${p(d.getMonth()+1)}-${p(d.getDate())} ${p(d.getHours())}:${p(d.getMinutes())}`;
}

zodiacSel.onchange=()=>{
 if(zodiacSel.value===""){
  leverBtn.disabled=true;
  zicon.textContent="✦";
  zname.textContent="星座を選んでください";
 }else{
  const i=Number(zodiacSel.value);
  zicon.textContent=icons[i];
  zname.textContent=zodiacs[i];
  leverBtn.disabled=false;
 }
};

leverBtn.onclick=()=>{
 if(zodiacSel.value==="")return;

 ticket.classList.add("show");
 document.getElementById("luck").textContent="吉";
 document.getElementById("meta").textContent=`発行：喫茶テーブル神社 / ${nowStr()}`;

 document.getElementById("today").textContent=`時刻：${pick(timeLuck)}が動く`;
 document.getElementById("love").textContent=`恋愛：${pick(love)}`;
 document.getElementById("work").textContent=`仕事：${pick(work)}`;
 document.getElementById("health").textContent=`健康：${pick(health)}`;
 document.getElementById("money").textContent=`金運：${pick(money)}`;
 document.getElementById("people").textContent=`対人：${pick(people)}`;
 document.getElementById("time").textContent=`勝負：${pick(timeLuck)}`;

 document.getElementById("item").textContent=`持ち物：${pick(items)}`;
 document.getElementById("food").textContent=`食：${pick(foods)}`;
 document.getElementById("color").textContent=`色：${pick(colors)}`;

 document.getElementById("one").textContent=`一言：${pick(oneLiners)}`;
 document.getElementById("caution").textContent=`注意：${pick(cautions)}`;

 resetBtn.disabled=false;
};

resetBtn.onclick=()=>{
 ticket.classList.remove("show");
 resetBtn.disabled=true;
 leverBtn.disabled=true;
 zodiacSel.value="";
 zicon.textContent="✦";
 zname.textContent="星座を選んでください";
};
</script>
</body>
</html>
