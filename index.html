<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>喫茶店 星座ルーレットおみくじ</title>

<style>
body{
  font-family:"Noto Serif JP",serif;
  background:#f6f1e7;
  margin:0;
  text-align:center;
  color:#2a2a2a;
}

.wrap{max-width:860px;margin:0 auto;padding:18px;}
h1{font-size:22px;margin:10px 0 14px;}

.machine{
  background:#fff7ea;
  border:2px solid #6b4f3a;
  border-radius:16px;
  padding:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.12);
}

/* ルーレット全体 */
.dial-wrap{
  position:relative;
  width:340px;
  height:340px;
  margin:10px auto;
}

/* 外周48分割リング */
.ring{
  position:absolute;
  inset:0;
  border-radius:50%;
  border:8px solid #6b4f3a;
  transform:rotate(0deg);
  transition:transform 3s cubic-bezier(.1,.9,.1,1);
  background:
    repeating-conic-gradient(
      rgba(40,40,40,.6) 0 1deg,
      transparent 1deg 7.5deg
    ),
    conic-gradient(
      #f5f6f8,
      #cfd5dd,
      #f7f8fa,
      #bfc6cf,
      #f5f6f8
    );
}

/* 銀リングを細く見せる */
.ring::after{
  content:"";
  position:absolute;
  inset:60px;
  border-radius:50%;
  background:#fff7ea;
  box-shadow:inset 0 0 0 2px rgba(0,0,0,.1);
}

/* 中央大きめ */
.center{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:220px;
  height:220px;
  border-radius:50%;
  background:#fff;
  border:2px solid rgba(107,79,58,.5);
  box-shadow:0 10px 24px rgba(0,0,0,.15);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:3;
}

.zicon{
  font-size:90px;
  color:#6b4f3a;
}

.zname{
  position:absolute;
  bottom:25px;
  font-size:13px;
  opacity:.7;
}

/* 下側の金三角 */
.pointer{
  position:absolute;
  left:50%;
  bottom:-8px;
  transform:translateX(-50%) rotate(180deg);
  width:0;
  height:0;
  border-left:18px solid transparent;
  border-right:18px solid transparent;
  border-top:32px solid #d4af37;
  filter:drop-shadow(0 3px 4px rgba(0,0,0,.35));
  z-index:5;
}

/* UI */
.panel{margin-top:10px;}
select,button{
  padding:10px 12px;
  border-radius:12px;
  border:2px solid #6b4f3a;
  background:#fff;
  font-size:15px;
}
button{cursor:pointer}
button:disabled{opacity:.5}

.status{margin-top:10px;font-size:14px;}

.paper{
  display:none;
  margin-top:14px;
  padding:14px;
  border:1px solid #ddd;
  border-radius:10px;
  background:#fff;
  text-align:left;
}
.paper h2{margin:0 0 8px;}
.line{margin:4px 0;}
</style>
</head>

<body>
<div class="wrap">
<h1>喫茶店 星座ルーレットおみくじ</h1>

<div class="machine">

<div class="dial-wrap">
  <div id="ring" class="ring"></div>
  <div class="pointer"></div>

  <div class="center">
    <div class="zicon" id="zicon">✦</div>
    <div class="zname" id="zname">星座を選んでください</div>
  </div>
</div>

<div class="panel">
<select id="zodiac">
<option value="">選んでください</option>
<option value="0">牡羊座</option>
<option value="1">牡牛座</option>
<option value="2">双子座</option>
<option value="3">蟹座</option>
<option value="4">獅子座</option>
<option value="5">乙女座</option>
<option value="6">天秤座</option>
<option value="7">蠍座</option>
<option value="8">射手座</option>
<option value="9">山羊座</option>
<option value="10">水瓶座</option>
<option value="11">魚座</option>
</select>

<button id="lever" disabled>レバーを引く</button>
<button id="reset" disabled>もう一回</button>
</div>

<div class="status" id="status">手順：星座 → レバー</div>

<div id="paper" class="paper">
<h2 id="luck"></h2>
<div class="line" id="zline"></div>
<div class="line" id="love"></div>
<div class="line" id="work"></div>
<div class="line" id="health"></div>
<div class="line" id="one"></div>
</div>

</div>
</div>

<script>
const ring = document.getElementById("ring");
const zodiacSel = document.getElementById("zodiac");
const leverBtn = document.getElementById("lever");
const resetBtn = document.getElementById("reset");
const zicon = document.getElementById("zicon");
const zname = document.getElementById("zname");
const paper = document.getElementById("paper");
const statusEl = document.getElementById("status");

const zodiacs = ["牡羊座","牡牛座","双子座","蟹座","獅子座","乙女座","天秤座","蠍座","射手座","山羊座","水瓶座","魚座"];
const icons = ["♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓"];

const fortunes = [
{luck:"大吉", love:"話しかけると吉", work:"先に片づけるべし", health:"湯船が正義", one:"プリンが運を連れてくる"},
{luck:"中吉", love:"返信は急がず", work:"手順を守れ", health:"首を温めよ", one:"喫茶店の椅子は味方"},
{luck:"小吉", love:"笑うと流れが変わる", work:"メモがあなたを救う", health:"水を一杯足せ", one:"今日は焦らない"},
{luck:"吉", love:"比べない", work:"一点集中", health:"目を休めよ", one:"コーヒー濃すぎ注意"},
{luck:"末吉", love:"期待しすぎない", work:"見直し一回", health:"冷えに注意", one:"寄り道に福あり"},
{luck:"凶", love:"言い過ぎ注意", work:"衝動で動くな", health:"寝不足は敵", one:"甘いもの控えめ"},
{luck:"大凶", love:"今日は守り", work:"決めないが正解", health:"無理しない", one:"やらないことを決めよ"}
];

let spinning=false;
let ringAngle=0;

zodiacSel.onchange=()=>{
 if(zodiacSel.value===""){
  leverBtn.disabled=true;
  zicon.textContent="✦";
  zname.textContent="星座を選んでください";
 }else{
  const i=Number(zodiacSel.value);
  zicon.textContent=icons[i];
  zname.textContent=zodiacs[i];
  leverBtn.disabled=false;
 }
};

leverBtn.onclick=()=>{
 if(spinning||zodiacSel.value==="")return;
 spinning=true;
 leverBtn.disabled=true;
 zodiacSel.disabled=true;
 paper.style.display="none";
 statusEl.textContent="ルーレット回転中…";

 const chosenIdx=Number(zodiacSel.value);
 const pocket=chosenIdx*4+Math.floor(Math.random()*4);
 const pocketCenter=pocket*(360/48)+(360/96);
 const turns=12+Math.floor(Math.random()*6);

 ringAngle=ringAngle+turns*360-pocketCenter;
 ring.style.transform=`rotate(${ringAngle}deg)`;

 setTimeout(()=>{
  const f=fortunes[Math.floor(Math.random()*fortunes.length)];
  paper.style.display="block";
  document.getElementById("luck").textContent=f.luck;
  document.getElementById("zline").textContent="星座："+zodiacs[chosenIdx];
  document.getElementById("love").textContent="恋愛："+f.love;
  document.getElementById("work").textContent="仕事："+f.work;
  document.getElementById("health").textContent="健康："+f.health;
  document.getElementById("one").textContent="一言："+f.one;
  resetBtn.disabled=false;
  spinning=false;
  statusEl.textContent="止まりました。";
 },3000);
};

resetBtn.onclick=()=>{
 zodiacSel.disabled=false;
 zodiacSel.value="";
 leverBtn.disabled=true;
 resetBtn.disabled=true;
 paper.style.display="none";
 zicon.textContent="✦";
 zname.textContent="星座を選んでください";
 statusEl.textContent="手順：星座 → レバー";
};
</script>
</body>
</html>
